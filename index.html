<!DOCTYPE html>
<html>
   <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma-rtl.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>       
        <script src="https://cdn.rawgit.com/giobauermeister/836975dcbe2fd05a5a2a9dcee6bcec4d/raw/49db24b1ecb60d361f3119ba7e2519f9e2b39101/iro.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <title>LEDs do Bruno</title>
   </head>
   <body>
        <section class="hero is-primary">
            <div class="centered">
                <div class="hero-body">
                    <p class="title">BRUNO14</p>
                </div>
                <div id="color-picker-container"></div>
                <p></p>
                <div class="has-text-centered" >
                    <input class="input is-primary" placeholder="Quantidade de Leds a alterar" id="qtdLeds" type="text" style="text-align: center;" value="300">
                    <input class="input is-danger" placeholder="EndereÃ§o IP" id="ipAddress" type="text" style="text-align: center;">
                    <button class="button is-link" onclick="enviarComando()">Enviar</button>
                </div>
            </div>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
        </section>
       <script>
           var cor;
            function enviarComando(){
               var ipAddress = document.getElementById("ipAddress").value;
               var qtdLeds = document.getElementById("qtdLeds").value;
			   var corEQtd = {r:cor.rgb.r,
							  g:cor.rgb.g,
							  b:cor.rgb.b,
							  q:parseInt(qtdLeds)};
               //document.getElementById('title').style.color = color.hexString;
               var url = "http://" + ipAddress + "/colordata";
			   var jsonString = JSON.stringify(corEQtd);
               xhttp.open("POST", url);
               xhttp.send(jsonString);
            };           
           var xhttp = new XMLHttpRequest();        
           var demoColorPicker = new iro.ColorPicker("#color-picker-container", {
               width: 300,
               height: 300,
               color: "#FFFFFF"
           });
           demoColorPicker.on("color:change", function (color, changes) {
               console.log(color.rgb);
               cor = color;
           });
       </script>
       <style>
           .centered {
               margin: 0 auto;
               max-width: 300px;
           }
       </style>
   </body>
</html>